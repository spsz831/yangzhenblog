---
import PublicLayout from "@/layouts/PublicLayout.astro";
import { getDb } from "@/db";
import { posts } from "@/db/schema";
import { desc, eq, lte, and } from "drizzle-orm";
import { format } from "date-fns";
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/card";
import TypewriterEffect from "@/components/TypewriterEffect";

// export const prerender = true;

const db = getDb(Astro.locals.runtime.env.DB);
const publishedPosts = await db.select().from(posts)
  .where(and(
    eq(posts.status, 'published'),
    lte(posts.publishedAt, new Date())
  ))
  .orderBy(desc(posts.publishedAt)).all();
---

<PublicLayout title="é¦–é¡µ">
  
  <section class="container max-w-4xl py-20 lg:py-32">
    <div class="flex flex-col gap-6">
      <h1 class="text-4xl font-bold leading-tight tracking-tighter md:text-6xl lg:text-7xl mb-2">
        ä½ å¥½ï¼Œæˆ‘æ˜¯
      </h1>
      <div class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tight text-cyan-500 mb-4">
        æ¨æŒ¯ <span class="text-blue-500">| spsz0831</span>
      </div>
      <div class="text-3xl md:text-5xl font-semibold text-foreground mb-4 min-h-[1.5em]">
        <TypewriterEffect client:load />
      </div>
      <div class="text-2xl md:text-4xl font-medium text-muted-foreground mb-4">
        å–œæ¬¢ <span class="text-[#42b883]">Vue</span>ã€<span class="text-[#61dafb]">React</span>ã€<span class="text-[#3178c6]">TypeScript</span> \owo/ ~
      </div>
      <p class="text-lg text-muted-foreground max-w-[700px]">
        åœ¨è¿™é‡Œè®°å½•æˆ‘çš„æ—¥å¸¸ã€æƒ³æ³•ï¼Œæ•…äº‹å’Œè§‚ç‚¹ï¼Œåšä¸€ä¸ªç®€å•ã€æ›´å¥½çš„è‡ªå·±ğŸ’ª
      </p>
      
      <div class="flex flex-wrap gap-4 mt-4">
        <a href="/posts" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
          æˆ‘çš„åšå®¢
        </a>
        <a href="/about" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
          å…³äºæˆ‘
        </a>
        <a href="https://www.buymeacoffee.com/" target="_blank" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-yellow-400 text-black hover:bg-yellow-500 h-10 px-4 py-2">
          â˜• Buy me a coffee
        </a>
      </div>

      <div class="flex gap-4 mt-4">
        <a href="https://github.com/spsz831" target="_blank" class="transition-transform hover:scale-110">
          <img src="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio460ow-53of5g5q3p" alt="GitHub" class="w-8 h-8" />
        </a>
        <a href="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio49yec-3d2p3r143f55" target="_blank" class="transition-transform hover:scale-110">
          <img src="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio42yct-3h2p2x5n5j6k" alt="WeChat" class="w-8 h-8" />
        </a>
        <a href="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio42l1n-592q2i5c3h38" target="_blank" class="transition-transform hover:scale-110">
          <img src="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio41xub-z7158441a5a" alt="Official Account" class="w-8 h-8" />
        </a>
        <a href="https://x.com/spsz0831" target="_blank" class="transition-transform hover:scale-110">
          <img src="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio41nl8-6a75e4s4qn" alt="Twitter" class="w-8 h-8" />
        </a>
        <a href="mailto:yangzhen0806@gmail.com" class="transition-transform hover:scale-110">
          <img src="https://image-bed-worker.yangzhen0806.workers.dev/api/file/mio427ef-2pw4s4v303p" alt="Email" class="w-8 h-8" />
        </a>
      </div>
    </div>
  </section>
  
</PublicLayout>
