---
import { getDb } from "@/db";
import { users } from "@/db/schema";

export const prerender = false;

const db = getDb(Astro.locals.runtime.env.DB);
const allUsers = await db.select().from(users).all();
---

<html>
<body>
    <h1>Users List</h1>
    <ul>
        {allUsers.map(u => (
            <li>{u.username} - {u.email} - {u.passwordHash}</li>
        ))}
    </ul>
    <p>Total: {allUsers.length}</p>
</body>
</html>
